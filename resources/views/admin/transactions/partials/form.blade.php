<form action="{{ $action }}" method="POST" enctype="multipart/form-data" id="transactionForm">
    @csrf
    @if ($method === 'PUT')
        @method('PUT')
    @endif

    <!-- Step 1: Basic Information -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-primary mb-3">
                <i class="fas fa-info-circle me-1"></i>
                ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
            </h5>
        </div>

        <div class="col-md-4">
            <label class="form-label fw-bold">
                <i class="fas fa-calendar text-primary me-1"></i>
                ุชุงุฑูุฎ ุงููุนุงููุฉ
            </label>
            <input type="date" name="transaction_date"
                class="form-control @error('transaction_date') is-invalid @enderror"
                value="{{ old('transaction_date', $transaction?->transaction_date?->format('Y-m-d') ?? date('Y-m-d')) }}">
            @error('transaction_date')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>

        <div class="col-md-4">
            <label class="form-label fw-bold">
                <i class="fas fa-user text-primary me-1"></i>
                ูู/ุฅูู
            </label>
            <input type="text" name="from_to" class="form-control @error('from_to') is-invalid @enderror"
                placeholder="ุงุณู ุงูุดุฎุต ุฃู ุงูุฌูุฉ" value="{{ old('from_to', $transaction?->from_to) }}">
            @error('from_to')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>
        <div class="col-md-4">
            <label class="form-label fw-bold">
                <i class="fas fa-tag text-primary me-1"></i>
                ููุน ุงูุนูููุฉ
            </label>
            <select name="type" id="transactionType"
                class="form-control select2 @error('type') is-invalid @enderror">
                <option value="">ุงุฎุชุฑ ููุน ุงูุนูููุฉ</option>
                <option value="deposit" data-effect="positive" data-description="ูุถุงู ุฅูู ุงูุฑุตูุฏ"
                    {{ old('type', $transaction?->type) == 'deposit' ? 'selected' : '' }}>
                    ๐ฐ ุฅูุฏุงุน <span class="text-success fw-bold">(+)</span>
                </option>
                <option value="withdrawal" data-effect="negative" data-description="ูุฎุตู ูู ุงูุฑุตูุฏ"
                    {{ old('type', $transaction?->type) == 'withdrawal' ? 'selected' : '' }}>
                    ๐ธ ุณุญุจ <span class="text-danger fw-bold">(-)</span>
                </option>
                <option value="transfer" data-effect="negative" data-description="ูุฎุตู ูู ุงูุฑุตูุฏ (ุชุญููู ูุขุฎุฑ)"
                    {{ old('type', $transaction?->type) == 'transfer' ? 'selected' : '' }}>
                    ๐ฑ ุชุญููู <span class="text-warning fw-bold">(-)</span>
                </option>
                <option value="other" data-effect="neutral" data-description="ุญุณุจ ุทุจูุนุฉ ุงูุนูููุฉ"
                    {{ old('type', $transaction?->type) == 'other' ? 'selected' : '' }}>
                    ๐ ุฃุฎุฑู <span class="text-info fw-bold">(ยฑ)</span>
                </option>
            </select>

            <!-- ูุคุดุฑ ุชุฃุซูุฑ ุงูุนูููุฉ -->
            <div id="transaction-effect" class="mt-2" style="display: none;">
                <div class="alert alert-sm p-2 mb-0" id="effect-alert">
                    <i class="fas fa-info-circle me-1"></i>
                    <span id="effect-text">ุงุฎุชุฑ ููุน ุงูุนูููุฉ ูุฑุคูุฉ ุชุฃุซูุฑูุง ุนูู ุงูุฑุตูุฏ</span>
                </div>
            </div>

            @error('type')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>
    </div>

    <!-- Step 2: Amount and Currency -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-primary mb-3">
                <i class="fas fa-coins me-1"></i>
                ุงููุจูุบ ูุงูุนููุฉ
            </h5>
        </div>

        <div class="col-md-4">
            <label class="form-label fw-bold">
                <i class="fas fa-money-bill text-success me-1"></i>
                ุงููููุฉ
            </label>
            <div class="input-group">
                <input type="number" name="amount" id="amount"
                    class="form-control @error('amount') is-invalid @enderror" step="0.01" min="0"
                    placeholder="0.00" value="{{ old('amount', $transaction?->amount) }}">
                <span class="input-group-text" id="currency-symbol">ุฑ.ุณ</span>
            </div>
            @error('amount')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>

        <div class="col-md-4">
            <label class="form-label fw-bold">
                <i class="fas fa-globe text-info me-1"></i>
                ุงูุนููุฉ
            </label>
            <select name="currency" id="currency" class="form-control select2 @error('currency') is-invalid @enderror">
                <option value="SAR"
                    {{ old('currency', $transaction?->currency ?? 'SAR') == 'SAR' ? 'selected' : '' }}>
                    ๐ธ๐ฆ ุฑูุงู ุณุนูุฏู (SAR)
                </option>
                <option value="KWD" {{ old('currency', $transaction?->currency) == 'KWD' ? 'selected' : '' }}>
                    ๐ฐ๐ผ ุฏููุงุฑ ูููุชู (KWD)
                </option>
                <option value="EGP" {{ old('currency', $transaction?->currency) == 'EGP' ? 'selected' : '' }}>
                    ๐ช๐ฌ ุฌููู ูุตุฑู (EGP)
                </option>
                <option value="USD" {{ old('currency', $transaction?->currency) == 'USD' ? 'selected' : '' }}>
                    ๐บ๐ธ ุฏููุงุฑ ุฃูุฑููู (USD)
                </option>
                <option value="EUR" {{ old('currency', $transaction?->currency) == 'EUR' ? 'selected' : '' }}>
                    ๐ช๐บ ููุฑู (EUR)
                </option>
            </select>
            @error('currency')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>

        <div class="col-md-4">
            <label class="form-label fw-bold">
                <i class="fas fa-bookmark text-warning me-1"></i>
                ุงูุชุตููู
            </label>
            <input type="text" name="category" class="form-control @error('category') is-invalid @enderror"
                placeholder="ูุซุงู: ุฑุงุชุจุ ูุตุฑููุงุช ุดุฎุตูุฉุ ุฅูุฎ..." list="categoryList"
                value="{{ old('category', $transaction?->category) }}">
            <datalist id="categoryList">
                <option value="ุฑุงุชุจ">
                <option value="ูุตุฑููุงุช ุดุฎุตูุฉ">
                <option value="ุชุญููู ููุนููู">
                <option value="ูุตุฑููุงุช ุงูุนูู">
                <option value="ุงุณุชุซูุงุฑ">
                <option value="ููุงุชูุฑ">
                <option value="ุทุนุงู ููุดุฑูุจุงุช">
                <option value="ููู ูููุงุตูุงุช">
                <option value="ุชุณูู">
                <option value="ุชุฑููู">
            </datalist>
            @error('category')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>
    </div>

    <!-- Currency Converter -->
    <div class="currency-converter p-4 mb-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="text-warning mb-0">
                <i class="fas fa-exchange-alt me-1"></i>
                ุญุงุณุจุฉ ุงูุชุญููู ุงููุตุฑูู
                <small class="text-muted">(ุงุฎุชูุงุฑูุฉ)</small>
            </h6>
            <div>
                <span class="badge bg-success">
                    <i class="fas fa-check-circle me-1"></i> ูุชููุฑุฉ ูุญููุงู
                </span>
            </div>
        </div>

        <!-- ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู -->
        <div class="alert alert-info alert-sm mb-3">
            <i class="fas fa-info-circle me-1"></i>
            <strong>ููููุฉ ุงูุงุณุชุฎุฏุงู:</strong> ุฃุฏุฎู ุงููุจูุบ ูุงุฎุชุฑ ุงูุนููุฉ ุฃููุงูุ ุซู ุงุฎุชุฑ ุงูุนููุฉ ุงููุฑุงุฏ ุงูุชุญููู ุฅูููุง ูุงุถุบุท
            "ุงุญุณุจ ุงูุชุญููู"
        </div>

        <div class="row">
            <div class="col-md-3">
                <label class="form-label fw-bold">
                    <i class="fas fa-arrow-right text-primary me-1"></i>
                    ุชุญููู ุฅูู
                </label>
                <select id="convertToCurrency" class="form-control select2">
                    <option value="">ุงุฎุชุฑ ุงูุนููุฉ ุงููุณุชูุฏูุฉ</option>
                    <option value="SAR">๐ธ๐ฆ ุฑูุงู ุณุนูุฏู (SAR)</option>
                    <option value="KWD">๐ฐ๐ผ ุฏููุงุฑ ูููุชู (KWD)</option>
                    <option value="EGP">๐ช๐ฌ ุฌููู ูุตุฑู (EGP)</option>
                    <option value="USD">๐บ๐ธ ุฏููุงุฑ ุฃูุฑููู (USD)</option>
                    <option value="EUR">๐ช๐บ ููุฑู (EUR)</option>
                </select>
            </div>
            <div class="col-md-3">
                <label class="form-label fw-bold">
                    <i class="fas fa-calculator text-success me-1"></i>
                    ุงููุจูุบ ุงููุญูู
                </label>
                <input type="text" id="convertedAmount" class="form-control bg-light" readonly
                    placeholder="ุณูุธูุฑ ููุง ุจุนุฏ ุงูุญุณุงุจ">
            </div>
            <div class="col-md-3">
                <label class="form-label fw-bold">
                    <i class="fas fa-chart-line text-info me-1"></i>
                    ุณุนุฑ ุงูุตุฑู
                </label>
                <input type="text" id="exchangeRate" class="form-control bg-light" readonly
                    placeholder="ุณูุธูุฑ ููุง ุจุนุฏ ุงูุญุณุงุจ">
            </div>
            <div class="col-md-3 d-flex align-items-end">
                <button type="button" id="calculateExchange" class="btn btn-warning w-100">
                    <i class="fas fa-calculator me-1"></i> ุงุญุณุจ ุงูุชุญููู
                </button>
            </div>
        </div>

        <!-- ูุนูููุงุช ุฅุถุงููุฉ -->
        <div class="row mt-3">
            <div class="col-12">
                <small class="text-muted d-block">
                    <i class="fas fa-info-circle me-1"></i>
                    <strong>ุงูุนููุงุช ุงููุฏุนููุฉ:</strong> ุงูุฑูุงู ุงูุณุนูุฏูุ ุงูุฏููุงุฑ ุงููููุชูุ ุงูุฌููู ุงููุตุฑูุ ุงูุฏููุงุฑ ุงูุฃูุฑูููุ
                    ุงูููุฑู
                </small>
                <small class="text-muted d-block mt-1">
                    <i class="fas fa-clock me-1"></i>
                    ุขุฎุฑ ุชุญุฏูุซ ููุฃุณุนุงุฑ: 19 ุฏูุณูุจุฑ 2024 - ุงูุฃุณุนุงุฑ ุชูุฑูุจูุฉ ููุฏ ุชุฎุชูู ุนู ุงูุฃุณุนุงุฑ ุงูุญููููุฉ ูู ุงูุจููู
                </small>
            </div>
        </div>
    </div>

    <!-- Step 3: Additional Details -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-primary mb-3">
                <i class="fas fa-paperclip me-1"></i>
                ุงููุฑููุงุช ูุงูุชูุงุตูู ุงูุฅุถุงููุฉ
            </h5>
        </div>

        <div class="col-md-6">
            <label class="form-label fw-bold">
                <i class="fas fa-file-upload text-info me-1"></i>
                ูุฑูู (ุตูุฑุฉ/ููู)
            </label>
            <input type="file" name="link_or_image"
                class="form-control @error('link_or_image') is-invalid @enderror" accept="image/*,.pdf">
            <small class="form-text text-muted">
                ููููู ุฑูุน ุตูุฑุฉ ุฃู ููู PDF (ุงูุญุฏ ุงูุฃูุตู: 5 ููุฌุงุจุงูุช)
            </small>
            @if ($transaction?->link_or_image)
                <div class="mt-2">
                    <small class="text-success">
                        <i class="fas fa-check me-1"></i>
                        ููุฌุฏ ููู ูุฑูู ุญุงููุงู
                    </small>
                </div>
            @endif
            @error('link_or_image')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>

        <div class="col-md-6">
            <label class="form-label fw-bold">
                <i class="fas fa-sticky-note text-secondary me-1"></i>
                ููุงุญุธุงุช
            </label>
            <textarea name="notes" class="form-control @error('notes') is-invalid @enderror" rows="4"
                placeholder="ุฃุถู ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ ููุง...">{{ old('notes', $transaction?->notes) }}</textarea>
            @error('notes')
                <div class="invalid-feedback">{{ $message }}</div>
            @enderror
        </div>
    </div>

    <!-- Form Actions -->
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between">
                <a href="{{ route('admin.transactions.index') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-right me-1"></i>
                    ุงูุนูุฏุฉ ูููุงุฆูุฉ
                </a>
                <div>
                    <button type="button" class="btn btn-outline-info me-2" onclick="resetForm()">
                        <i class="fas fa-redo me-1"></i>
                        ุฅุนุงุฏุฉ ุชุนููู
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save me-1"></i>
                        {{ $transaction ? 'ุชุญุฏูุซ ุงููุนุงููุฉ' : 'ุญูุธ ุงููุนุงููุฉ' }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

<style>
    .currency-converter {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        border: 2px dashed #ffc107;
        border-radius: 10px;
        transition: all 0.3s ease;
    }

    .currency-converter:hover {
        border-color: #ff9500;
        background: linear-gradient(135deg, #fff8e1 0%, #ffe082 100%);
        box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
    }

    .currency-converter .btn-warning {
        background: linear-gradient(135deg, #ffc107 0%, #ff9500 100%);
        border: none;
        color: white;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .currency-converter .btn-warning:hover {
        background: linear-gradient(135deg, #ff9500 0%, #ff6b35 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(255, 149, 0, 0.4);
    }

    .currency-converter .btn-warning:disabled {
        background: #6c757d;
        transform: none;
        box-shadow: none;
    }

    .currency-converter .form-control.bg-light {
        background-color: rgba(255, 255, 255, 0.8) !important;
        border: 1px solid #dee2e6;
    }

    .alert-sm {
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
    }

    .highlight-result {
        animation: highlightPulse 2s ease-in-out;
        border-color: #28a745 !important;
        box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25) !important;
    }

    @keyframes highlightPulse {
        0% {
            background-color: #d4edda;
            border-color: #28a745;
        }

        50% {
            background-color: #c3e6cb;
            border-color: #20c997;
        }

        100% {
            background-color: white;
            border-color: #dee2e6;
        }
    }

    .currency-converter .alert {
        border-radius: 8px;
        border: none;
        font-size: 0.9rem;
    }

    .currency-converter .alert-success {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        color: #155724;
    }

    .currency-converter .alert-danger {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        color: #721c24;
    }
</style>

@push('scripts')
    <script>
        $(document).ready(function() {
            // ุชุญุฏูุซ ุฑูุฒ ุงูุนููุฉ
            const currencySymbols = {
                'SAR': 'ุฑ.ุณ',
                'KWD': 'ุฏ.ู',
                'EGP': 'ุฌ.ู',
                'USD': '$',
                'EUR': 'โฌ'
            };

            const currencyNames = {
                'SAR': 'ุงูุฑูุงู ุงูุณุนูุฏู',
                'KWD': 'ุงูุฏููุงุฑ ุงููููุชู',
                'EGP': 'ุงูุฌููู ุงููุตุฑู',
                'USD': 'ุงูุฏููุงุฑ ุงูุฃูุฑููู',
                'EUR': 'ุงูููุฑู'
            };

            $('#currency').change(function() {
                const selectedCurrency = $(this).val();
                $('#currency-symbol').text(currencySymbols[selectedCurrency] || selectedCurrency);

                // ูุณุญ ุงููุชุงุฆุฌ ุนูุฏ ุชุบููุฑ ุงูุนููุฉ
                clearCalculationResults();
            });

            // ุชุดุบูู ุนูุฏ ุงูุชุญููู
            $('#currency').trigger('change');

            // ุญุงุณุจุฉ ุงูุชุญููู ุงููุตุฑูู ุงููุญุณูุฉ
            $('#calculateExchange').click(function(e) {
                e.preventDefault();

                const amount = parseFloat($('#amount').val());
                const fromCurrency = $('#currency').val();
                const toCurrency = $('#convertToCurrency').val();

                // ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
                if (!amount || amount <= 0 || isNaN(amount)) {
                    showErrorMessage('ูุฑุฌู ุฅุฏุฎุงู ูุจูุบ ุตุญูุญ ุฃูุจุฑ ูู ุตูุฑ');
                    return false;
                }

                if (!fromCurrency) {
                    showErrorMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุนููุฉ ุงููุตุฏุฑ');
                    return false;
                }

                if (!toCurrency) {
                    showErrorMessage('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุนููุฉ ุงููุณุชูุฏูุฉ');
                    return false;
                }

                if (fromCurrency === toCurrency) {
                    showErrorMessage('ูุง ูููู ุงูุชุญููู ูู ููุณ ุงูุนููุฉ ุฅูู ููุณูุง');
                    return false;
                }

                // ุฅุธูุงุฑ loading
                const $button = $(this);
                const originalText = $button.html();
                $button.html('<i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุงูุญุณุงุจ...')
                    .prop('disabled', true);

                // ูุณุญ ุงููุชุงุฆุฌ ุงูุณุงุจูุฉ
                clearCalculationResults();

                // ุทูุจ AJAX ูุญุณู
                $.ajax({
                    url: '{{ route('admin.transactions.exchange-rates') }}',
                    method: 'GET',
                    data: {
                        from: fromCurrency,
                        to: toCurrency,
                        amount: amount
                    },
                    timeout: 10000, // 10 ุซูุงูู timeout
                    cache: false,
                    success: function(data) {
                        console.log('API Response:', data); // ููุชุตุญูุญ

                        if (data.success) {
                            const convertedAmountText = parseFloat(data.converted_amount)
                                .toLocaleString('ar-SA', {
                                    minimumFractionDigits: 2,
                                    maximumFractionDigits: 2
                                }) + ' ' + currencySymbols[data.to];

                            const exchangeRateText = '1 ' + currencySymbols[data.from] + ' = ' +
                                parseFloat(data.rate).toLocaleString('ar-SA', {
                                    minimumFractionDigits: 2,
                                    maximumFractionDigits: 6
                                }) + ' ' + currencySymbols[data.to];

                            $('#convertedAmount').val(convertedAmountText);
                            $('#exchangeRate').val(exchangeRateText);

                            // ุฅุธูุงุฑ ุฑุณุงูุฉ ูุฌุงุญ ูุน ุงูุชูุงุตูู
                            const successMessage = `
                        <strong>ุชู ุญุณุงุจ ุงูุชุญููู ุจูุฌุงุญ!</strong><br>
                        <small>${data.note || 'ุชุญููู ูู ' + currencyNames[fromCurrency] + ' ุฅูู ' + currencyNames[toCurrency]}</small>
                    `;
                            showSuccessMessage(successMessage);

                            // ุฅุถุงูุฉ ุชุฃุซูุฑุงุช ุจุตุฑูุฉ
                            $('#convertedAmount, #exchangeRate').addClass('highlight-result');
                            setTimeout(() => {
                                $('#convertedAmount, #exchangeRate').removeClass(
                                    'highlight-result');
                            }, 2000);

                        } else {
                            showErrorMessage(data.message || 'ุฎุทุฃ ูู ุญุณุงุจ ุงูุชุญููู');
                        }
                    },
                    error: function(xhr, status, error) {
                        console.error('AJAX Error:', status, error, xhr
                        .responseText); // ููุชุตุญูุญ

                        let errorMessage = 'ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุญุงุณุจุฉ ุงูุชุญููู';

                        if (xhr.status === 422) {
                            // ุฎุทุฃ ูู ุงูุชุญูู ูู ุงูุจูุงูุงุช
                            try {
                                const response = JSON.parse(xhr.responseText);
                                errorMessage = response.message || 'ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ';
                            } catch (e) {
                                errorMessage = 'ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ';
                            }
                        } else if (xhr.status === 400) {
                            // ุฎุทุฃ ูู ุงููุนุทูุงุช
                            try {
                                const response = JSON.parse(xhr.responseText);
                                errorMessage = response.message || 'ุทูุจ ุบูุฑ ุตุญูุญ';
                            } catch (e) {
                                errorMessage = 'ุทูุจ ุบูุฑ ุตุญูุญ';
                            }
                        } else if (status === 'timeout') {
                            errorMessage = 'ุงูุชูุช ูููุฉ ุงูุงูุชุธุงุฑ - ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู';
                        } else if (xhr.status === 404) {
                            errorMessage = 'ุฎุฏูุฉ ุงูุชุญููู ุบูุฑ ูุชููุฑุฉ ุญุงููุงู';
                        } else if (xhr.status === 500) {
                            errorMessage = 'ุฎุทุฃ ูู ุงูุฎุงุฏู - ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู';
                        } else if (xhr.status === 0) {
                            errorMessage = 'ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช';
                        }

                        showErrorMessage(errorMessage);
                    },
                    complete: function() {
                        // ุฅุนุงุฏุฉ ุงูุฒุฑ ูุญุงูุชู ุงูุฃุตููุฉ
                        $button.html(originalText).prop('disabled', false);
                    }
                });
            });

            // ุชุญุฏูุซ ุงูุชุญููู ุนูุฏ ุชุบููุฑ ุงููุจูุบ ุฃู ุงูุนููุฉ
            $('#amount, #currency, #convertToCurrency').on('change input', function() {
                clearCalculationResults();
            });

            // ููุน ุฅุฑุณุงู ุงููููุฐุฌ ุฅุฐุง ุชู ุงูุถุบุท ุนูู Enter ูู ุญูู ุงููุจูุบ
            $('#amount').keypress(function(e) {
                if (e.which === 13) { // Enter key
                    e.preventDefault();
                    $('#calculateExchange').click();
                }
            });
        });

        // ุฏุงูุฉ ูุณุญ ุงููุชุงุฆุฌ
        function clearCalculationResults() {
            $('#convertedAmount').val('');
            $('#exchangeRate').val('');
            $('.alert-success, .alert-danger').fadeOut(function() {
                $(this).remove();
            });
        }

        // ุฏูุงู ุนุฑุถ ุงูุฑุณุงุฆู ุงููุญุณูุฉ
        function showSuccessMessage(message) {
            // ุฅุฒุงูุฉ ุงูุฑุณุงุฆู ุงููุฏููุฉ
            $('.alert-success, .alert-danger').remove();

            const alertHtml = `
        <div class="alert alert-success alert-dismissible fade show mt-3" role="alert">
            <div class="d-flex align-items-center">
                <i class="fas fa-check-circle me-2 fa-lg"></i>
                <div>${message}</div>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    `;

            $('.currency-converter').after(alertHtml);

            // ุฅุฒุงูุฉ ุงูุชูุจูู ุจุนุฏ 6 ุซูุงู
            setTimeout(function() {
                $('.alert-success').fadeOut(function() {
                    $(this).remove();
                });
            }, 6000);
        }

        function showErrorMessage(message) {
            // ุฅุฒุงูุฉ ุงูุฑุณุงุฆู ุงููุฏููุฉ
            $('.alert-success, .alert-danger').remove();

            const alertHtml = `
        <div class="alert alert-danger alert-dismissible fade show mt-3" role="alert">
            <div class="d-flex align-items-center">
                <i class="fas fa-exclamation-triangle me-2 fa-lg"></i>
                <div>${message}</div>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    `;

            $('.currency-converter').after(alertHtml);

            // ุฅุฒุงูุฉ ุงูุชูุจูู ุจุนุฏ 10 ุซูุงู
            setTimeout(function() {
                $('.alert-danger').fadeOut(function() {
                    $(this).remove();
                });
            }, 10000);
        }

        // ุฅุนุงุฏุฉ ุชุนููู ุงููููุฐุฌ
        function resetForm() {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุนููู ุงููููุฐุฌุ\nุณูุชู ููุฏุงู ุฌููุน ุงูุจูุงูุงุช ุงููุฏุฎูุฉ.')) {
                document.getElementById('transactionForm').reset();
                $('.select2').val(null).trigger('change');
                $('#currency').val('SAR').trigger('change');
                clearCalculationResults();
            }
        }
    </script>
@endpush
